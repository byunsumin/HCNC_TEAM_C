<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="hcnc.cteam.employee.NgjEmpMapper">
	<!-- 아이디,비밀번호 검색  -->
	<select id="selectUser" parameterType="empDto" resultType="int">
		SELECT COUNT(*)
		FROM employee e 
		WHERE id = #{id} AND password = SHA2(#{password},256); 
	</select>
	<!-- 로그인정보 부서명 까지 가져오기  -->
	
	<select id="empInfo" parameterType="empDto" resultType="empDto">
		SELECT e.emp_code ,e.assign_code,a.assign_name ,e.dep_code ,d.dep_name ,e.id ,e.password ,e.name ,e.mng_code 
		FROM employee e JOIN department d 
			ON e.dep_code = d.dep_code JOIN `assignment` a 
			ON e.assign_code = a.assign_code 
		WHERE id = #{id} AND password = SHA2(#{password},256);
	</select>
	

</mapper>